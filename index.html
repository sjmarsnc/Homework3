<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <title>Password Generator</title>
</head>

<body style="background-color: #eee;">
    <script>

        function makePassword() {

            var result = document.getElementById("generatedPassword"); 
            result.textContent = " "; 
        
            var useNums = confirm("Do you want to use numbers?");
            var useUpperCase = confirm("Do you want to use upper case letters?");
            var useLowerCase = confirm("Do you want to use lower case letters");
            var useSpecialChars = confirm("Do you want to use special characters?");

            var nums = ["0","1","2","3","4","5","6","7","8","9"];
            var specialChars = "!@#$%&*?~^<>[]{}\/|()";
            var lowerCase = 'abcdefghijklmnopqrstuvwxyz';
            var upperCase = lowerCase.toUpperCase(); 

            var useArrays = []; 

            // verify that at least one type of character was selected 

            if (useNums) {  
                useArrays.push(nums);
            }
            if (useUpperCase) {
                useArrays.push(upperCase);
            }

            if (useLowerCase) {
                useArrays.push(lowerCase);
            }

            if (useSpecialChars) {
                useArrays.push(specialChars);
            }

            console.log(useArrays);

            var howLong = prompt("How long do you want your password to be (8-128 chars)?");
            /* check for valid answer */ 

            var password = "";  

            for (var i=0; i < howLong; i++) {
                // determine type of character from types user selected 
                var charType = Math.floor( Math.random() * useArrays.length);
                console.log(charType);

                // randomly pick a character from that array 
                var charSelection = Math.floor( Math.random() * useArrays[charType].length);
                console.log(charSelection);
                
                // append it to the password 
                password = password + useArrays[charType][charSelection];
                console.log(password);
            }
            
            // var result = document.getElementById("generatedPassword"); 
            result.textContent = password; 
        
            // now it can be copied so enable the button 
            document.getElementById("copyClipboard").disabled = false;

        }

        function copyToClipboard() {
            alert("Copy to Clipboard button pushed");
            passwordEl = document.getElementById("generatedPassword");
            passwordEl.select(); 
            document.execCommand("copy"); 
            // somehow indicate that it has been copied? 
            
        }

    </script>

    <div class="container m-4" id="outerBox">
        <h1 class="text-center mb-5">Password Generator</h1>

        <div class="container" id="generatorArea">
            <div class="row">
                <div class="col col-12 mb-2 mt-5 ">
                    <h2>Generate a password</h2>
                </div>
            </div>
            <div class="row">
                <div class="col col-12" >
                    <textarea class="form-control" id="generatedPassword" rows="4">
                    </textarea>
                </div>
            </div>
                <div class="row justify-content-between m-4">
                   <button type="submit" onClick="makePassword();" class="btn btn-primary active" id="generatePassword">
                       Generate Password
                   </button>
                   <button type="submit" onClick="copyToClipboard();" class="btn btn-primary disabled" id="copyClipboard">
                       Copy to clipboard
                   </button>
               </div>
             
        </div>
    </div>



    </div>

    </div>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>